
= Проект API-автотестов
Автор: Арчаков Артем
Версия: 1.0
Дата: 28.09.2024

== Описание проекта
Этот проект представляет собой набор API-автотестов, разработанных для проверки основных операций работы с сущностями в приложении "API cервис" (https://github.com/sun6r0/test-service). Проект включает пять автотестов, покрывающих все основные точки доступа (эндпоинты) приложения, включая создание, получение, обновление и удаление сущностей. Все тесты представляют собой положительные кейсы и проверяют корректное функционирование API.

== Технологии и библиотеки
В проекте используются следующие технологии и библиотеки:
- Java: основной язык программирования
- TestNG: фреймворк для запуска и управления тестами
- RestAssured: библиотека для тестирования REST API
- Maven: система управления сборкой проекта
- Lombok: библиотека для уменьшения шаблонного кода (генерация геттеров/сеттеров/конструкторов)
- Jackson/Gson: библиотеки для десериализации/сериализации JSON-ответов

== Структура проекта
Проект состоит из следующих пакетов и классов:

=== Пакет `pojo`
Содержит POJO-классы для представления сущностей:
- `Entity`: класс, представляющий основную сущность.
- `Addition`: вложенный объект, представляющий дополнительную информацию о сущности.

=== Пакет `helpers`
Содержит вспомогательные классы:
- `BaseRequests`: базовая спецификация запросов, используемая для настройки всех запросов RestAssured.
- `FileHelper`: утилита для чтения JSON-файлов.

=== Пакет `services`
Содержит класс `EntityService`, который реализует операции взаимодействия с API:
- `createEntity()`: создает новую сущность в системе.
- `getAllEntities()`: получает список всех сущностей.
- `getEntityById(int id)`: получает сущность по ее ID.
- `deleteEntityById(int id)`: удаляет сущность по ее ID.
- `patchEntity(int entityId, Entity updatedEntity)`: обновляет данные сущности.

=== Пакет `utils`
Содержит класс `PropertyProvider` для работы с конфигурационными файлами.

=== Тестовые классы
Все тесты наследуются от `BaseApiTest`, который управляет настройкой и очисткой перед и после тестов:
- `CreateEntityTest`: тестирует создание новой сущности.
- `GetEntityTest`: тестирует получение сущности по ID.
- `GetAllEntitiesTest`: тестирует получение всех сущностей.
- `PatchEntityTest`: тестирует обновление данных существующей сущности.
- `DeleteEntityTest`: тестирует удаление сущности по ID.

== Запуск тестов
Для запуска всех тестов выполните следующую команду Maven:
```
mvn clean test  -Dallure.results.directory=target/allure-results

```

== Использование Allure для отчетов
Проект поддерживает интеграцию с Allure для генерации отчетов о результатах тестов. После выполнения тестов сгенерируйте отчет с помощью следующей команды:
```
mvn allure:serve
```

== Конфигурация
Основные параметры конфигурации (например, базовый URL, порт) хранятся в файле `env-default.xml`. Файл загружается с использованием класса `PropertyProvider`.

== Шаблон JSON для создания сущностей
Шаблон JSON для создания сущности хранится в файле `src/test/resources/json/userCreationBody.json`. Плейсхолдеры в этом шаблоне заменяются на динамические данные во время выполнения тестов.

== Десериализация
Все ответы API десериализуются в объекты с использованием библиотек Jackson/Gson, чтобы обеспечить удобную работу с данными в рамках тестов.

== Как добавить новый тест
1. Создайте новый тестовый класс, который будет наследовать `BaseApiTest`.
2. Используйте `EntityService` для выполнения операций над сущностями.
3. Добавьте проверки, чтобы убедиться в корректной работе API.

